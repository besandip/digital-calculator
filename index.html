<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <script src="https://code.jquery.com/jquery-2.2.4.js"
        integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"></script>
    <style>
        .btn {
            margin-right: 35px;
        }

        .btn {
            border-color: black;
        }
    </style>
</head>

<body>
    <div class="container border">
        <div class="row">
            <div class="col-3">
                <h2>digital calculator</h2>

            </div>

        </div>
        <div class="row g-0">
            <div class="col-9">
                <input class="form-control form-control" value="enter number" id="display" type="text"
                    aria-label=".form-control">
            </div>


            <div class="col-3"><button type="button" id="cls" class="btn btn-success">clear</button></div>
        </div>



        <hr>
        <div id="parent" class="row g-0">
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="}">}</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="1">1</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="2">2</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="3">3</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="+">+</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary" id="table">table</button></div>

        </div>
        <hr>
        <div class="row g-0">
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="{">{</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="4">4</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="5">5</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="6">6</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="-">-</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary"
                    style="padding-left:22px; padding-right: 22px;">fn</button></div>

        </div>
        <hr>
        <div class="row g-0">
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="(">(</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="7">7</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="8">8</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="9">9</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="*">x</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary"
                    style="padding-left:22px; padding-right: 22px;">x<sup>n</sup></button></div>
            <!-- Content here -->
        </div>
        <hr>
        <div class="row">
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value=")">)</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary" id="result">=</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="0">0</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="%">%</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="/">/</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="!"
                    style="padding-left:26px; padding-right: 26px;">!</button></div>
            <!-- Content here -->
        </div>
        <hr>
        <div class="row">
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="[">[</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary dis" value="]">]</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary">x<sup>2</sup></button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary dis">aaa</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary" value=".">.</button></div>
            <div class="col-2"><button type="button" class="btn btn-secondary" id="delete"
                    style="padding-left:18px; padding-right: 18px;">del</button></div>
            <!-- Content here -->
        </div>


    </div>
    <script>
        /*

        $(".dis").click(function(){
            $("#display").val("sandip");
            //$(this).hide();
        })
        */
        let btnArray = document.getElementsByClassName("dis");
        let display = document.getElementById("display");
        let result = document.getElementById('result');
        //console.log(btnArray);
        //console.log(display.value);
        for (let i = 0; i < btnArray.length; i++) {
            //console.log(btnArray[i].value);

            btnArray[i].addEventListener('click', function () {
                display.value += btnArray[i].value;
            })

        }

        $("#cls").click(function () {
            display.value = "";
        })

        result.addEventListener('click', calculate)


        function calculate() {
            let expresion = display.value;
            let arr = expresion.split('')
            let x = arr.slice(0, arr.indexOf('!')).join('')
            console.log(x);
            console.log(arr.indexOf('!'));
            arr.forEach(element => {
                if (element == '!') {
                    console.log(element);

                    (function () {
                        //let x=arr.slice(0,arr.indexOf('!')).join('')
                        let facto = 1;
                        for (i = 1; i <= x; i++) {
                            facto = facto * i;
                        }
                        display.value = facto;
                        console.log(facto);

                    })();
                }


            });
            let ans = eval(expresion);

            display.value = ans;
        };
        $("#delete").click(function () {
            let expresion = display.value;
            let arr = expresion.split('')
            let x = arr.slice(0, -1).join('');
            display.value = x;
        })
        $("#table").click(function () {
            let num = display.value;
            let i = 1;
            let id=setInterval(function () {
                display.value = num * i;
                i++;
            }, 500);
            $(this).hide();
            let newElm=document.createElement("button");
            newElm.textContent="STOP";
            newElm.style.color='red';
            console.log(newElm);
            let parent=document.getElementById("parent");
            let position=parent.lastElementChild;
            console.log(position);
            parent.insertBefore(newElm,position);
            //document.body.appendChild(newElm);
            newElm.addEventListener('click', function(){
                clearInterval(id);
                //newElm.id="hide";
                $(this).hide();
                $("#table").show();


            })
        })

    </script>

</body>

</html>